#include "dmat.h"

int main(int argc, const char* argv[]) {

	//void distance(	const double * vg_a, size_t pitch_a, size_t n_a,
	//			size_t k, double * d, size_t pitch_d );

	const double vg_a[110] = { 	0.181254, -0.585135, -0.60927, 0.191352, -0.402453, 0.14695, -0.282914, 0.519187, -0.00745311, 
								-0.114886, -0.286688, -0.00296578, -0.202359, -0.239975, 0.171379, -0.0611926, 0.45349, -0.0935648, 
								0.589659, -0.641492, 0.489091, 0.376823, -0.228953, 0.47934, 0.136344, -0.340885, 0.0764228, 
								-0.960732, 1, 0.293968, -0.0626467, -0.220027, -0.523963, -0.05336, 0.522304, 0.328645, 
								-0.84399, -0.543679, -0.362869, -0.253279, 0.225036, -0.789166, 0.253452, -0.685578, 0.311994, 
								-1, 0.359629, 1, -0.676075, -0.025972, 0.412234, 0.584265, -0.475419, -0.111974, 
								0.937092, 0.102344, -0.0282643, 1, 0.641631, -1, -0.192514, 0.601135, -1, 
								0.562969, 0.254497, -0.153238, 0.0401499, -0.649346, 0.358929, -1, 1, -0.179246, 
								0.544558, 0.71944, -0.69887, -0.864282, -0.503266, 0.189283, -0.21846, -0.768047, -0.0652458, 
								-0.334417, 0.159636, 0.154402, 0.0189855, 1, 0.1115, 0.465972, -0.662582, 0.942581, 
								0.438492, -0.538552, -0.0819845, 0.431333, 0.403324, 0.443514, 0.368407, -0.163604, -0.202159 };
	size_t k = 9;
	size_t pitch_a = k * sizeof(double);
	size_t n_a = 11;
	size_t pitch_d = n_a * sizeof(double);
	double* d = new double[n_a*n_a];

	double* vg_ul = new double[k];
	for(int i = 0; i < k; i++) {
		double minv = 1000000, maxv = -1000000;
		for (int j = 0; j < n_a; j++) {
			double v = vg_a[j * k + i];
			if (minv > v) minv = v;
			if (maxv < v) maxv = v;
			vg_ul[i] = maxv - minv;
		}
	}

	distance(vg_a, pitch_a, n_a, 
			 vg_ul, k, 
			 d, pitch_d);

	for(int i = 0; i < n_a; i++) {
		for(int j = 0; j < n_a; j++) {
			printf("%10.2f", d[i*n_a + j]);
		}
		printf("\n");
	}

	delete d; 

	return 0;
}